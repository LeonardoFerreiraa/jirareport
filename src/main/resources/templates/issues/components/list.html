<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<th:block th:fragment="list(issues)">
    <div class="panel panel-default table-responsive">
        <table class="table">
            <thead>
            <tr>
                <th></th>
                <th>Hist√≥ria</th>
                <th>Issue Type</th>
                <th>Data inicio</th>
                <th>Data fim</th>
                <th>LeadTime</th>
                <th th:unless="${#strings.isEmpty(project.epicCF)}">Epico</th>
                <th th:unless="${#strings.isEmpty(project.estimateCF)}">Estimativa</th>
                <th th:unless="${#strings.isEmpty(project.systemCF)}">Sistema</th>
                <th th:unless="${#strings.isEmpty(project.projectCF)}">Projeto</th>
                <th>Criador</th>
            </tr>
            </thead>
            <tbody>
            <th:block th:each="issue : ${issues}">
                <tr data-toggle="collapse" th:attr="data-target=${'.' + issue.key}" class="accordion-toggle">
                    <td>
                        <button class="btn btn-xs btn-default"><i class="fa fa-eye"></i></button>
                    </td>
                    <td th:text="${issue.title}"></td>
                    <td th:text="${issue.issueType}"></td>
                    <td th:text="${issue.startDate}"></td>
                    <td th:text="${issue.endDate}"></td>
                    <td th:text="${issue.leadTime}"></td>
                    <td th:unless="${#strings.isEmpty(project.epicCF)}" th:text="${issue.epic}"></td>
                    <td th:unless="${#strings.isEmpty(project.estimateCF)}" th:text="${issue.estimated}"></td>
                    <td th:unless="${#strings.isEmpty(project.systemCF)}" th:text="${issue.system}"></td>
                    <td th:unless="${#strings.isEmpty(project.projectCF)}" th:text="${issue.project}"></td>
                    <td th:text="${issue.creator}"></td>
                </tr>
                <tr class="accordian-body collapse" th:classappend="${issue.key}">
                    <td th:attr="colspan=${11 - project.colSizeHidden}">
                        <div class="accordian-body collapse panel panel-default table-responsive"
                             th:classappend="${issue.key}">
                            <table class="table table-bordered table-striped">
                                <thead>
                                <tr>
                                    <th>Data</th>
                                    <th>Coluna</th>
                                    <th>LeadTime</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr th:each="changelog : ${issue.changelog}">
                                    <td th:text="${changelog.created}"></td>
                                    <td th:text="${changelog.to}"></td>
                                    <td th:text="${changelog.cycleTime}"></td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </td>
                </tr>
            </th:block>
            </tbody>
        </table>
    </div>
</th:block>
</html>
